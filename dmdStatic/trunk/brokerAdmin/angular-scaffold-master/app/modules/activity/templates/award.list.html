<div class="account-module ng-scope">
	<div class="page-header"><h1>中奖管理</h1></div>
    <div class="filter clearfix">
    	<div class="row">
            	<div class="form-inline">
                	<ul class="se-list">
                    	<li>
                            <label class="text-normal text-nowrap first-label">活动名称：</label>
                            <select ng-model="activityId" class="form-control mc-auto-width" ng-change="getAwardSel()">
                              <option ng-repeat="item in activitySel" value="{{item.id}}">{{item.activityName}}</option>
                            </select>
                        </li>
                        <li>
                            <label class="text-normal text-nowrap">奖品名称：</label>
                            <select ng-model="awardId" class="form-control mc-auto-width">
                                <option value="">所有奖品</option>
                                <option ng-repeat="item in awardlist" value="{{item.id}}">{{item.name}}</option>
                            </select>
                        </li>
                        <li>
                            <label class="text-normal text-nowrap">奖品发放状态：</label>
                            <select ng-model="checked" class="form-control mc-auto-width">
                              <option>请选择奖品发放状态</option>
                              <option value="1">已发放</option>
                              <option value="2">未发放</option>
                            </select>
                        </li>
					</ul>
				</div>
        </div>
        <div class="row">
            <div class="form-inline">
                <ul class="se-list">
                    <li>
                        <label class="text-normal text-nowrap first-label">中奖用户手机号：</label>
                        <input type="text" ng-model="mobile" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"  class="form-control mc-auto-width" placeholder="请输入用户手机号">
                    </li>
                    
                    
                    <li>
                        <button class="btn btn-primary ml10" type="submit" ng-click="search()"><i class="fa fa-search"></i> 查找</button> 
                        <button class="btn btn-primary ml10" ng-click="markAward()"><i class="fa fa-search"></i> 发放奖品</button> 
                        <button class="btn btn-primary ml10"><i class="fa fa-search"></i> 导出EXCEL</button>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="form-inline">
                <ul class="se-list">
                    <li>
                        <label class="text-normal text-nowrap first-label">手动派奖：</label>
                        <select ng-model="_activityId" class="form-control mc-auto-width" ng-change="_getAwardSel()">
                          <option ng-repeat="item in activitySel" value="{{item.id}}">{{item.activityName}}</option>
                        </select>
                    </li>
                    <li>
                        <input type="text" ng-model="_mobile" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"  class="form-control mc-auto-width" placeholder="请输入用户手机号">
                    </li>
                    <li>
                        <label class="text-normal text-nowrap">奖品名称：</label>
                        <select ng-model="_awardId" class="form-control mc-auto-width">
                          <option ng-repeat="item in _awardlist" value="{{item.id}}">{{item.name}}</option>
                        </select>
                    </li>
                    
                    
                    <li>
                        <button class="btn btn-primary ml10" ng-click="giveAward()"><i class="fa fa-search"></i> 派奖</button>
                    </li>
                </ul>
            </div>
        </div>
	</div>
	<table class="table table-hover">
    	<thead>
        	<tr>
                <th><input type="checkbox" ng-model="selected" ng-change="selectAll()" value="" />全选</th>
            	<th>序号</th>
                <th>活动名称</th>
                <th>奖品</th>
                <th>中奖用户手机号</th>
                <th>中奖时间</th>
                <th>发放状态</th>
            </tr>
        </thead>
        <tbody>
        	<tr class="ng-scope" ng-repeat="item in list">
                <td class="ng-binding"><input type="checkbox" ng-model="item.selected"/></td>
            	<td class="ng-binding">{{$index+1}}</td>
                <td class="ng-binding">{{item.activityName}}</td>
                <td class="ng-binding">{{item.awardName}}</td>
                <td class="ng-binding">{{item.winnerMobile}}</td>
                <td class="ng-binding">{{item.winningTimeAt|date:'yyyy-mm-dd'}}</td>
                <td class="ng-binding">{{item.checked|awardFilter}}</td>
            </tr>
        </tbody>
    </table>
                        
    <div ng-show="total" class="text-right">
        <ul class="pagination-sm" pagination ng-model="page" items-per-page="size" total-items="total" ng-change="query()"></ul>
    </div>
</div>